<html>
	<head>
		<script src="/socket.io/socket.io.js"></script>
	</head>
	<body onLoad="Red5.PageLoaded();">
		<script>
			var socket = io.connect(Red5.RelayHost);
		  
			  socket.on('onTopic', function (data) 
			  {
				if (Red5)
					Red5.onTopic(data.nick, data.topic);
			  });
			  
			  socket.on('onJoin', function (data) 
			  {
				if (Red5)
					Red5.onJoin(data.nick);
			  });
			  
			  socket.on('onPart', function (data) 
			  {
				if (Red5)
					Red5.onPart(data.nick);
			  });
			  
			  socket.on('onMessage', function (data) 
			  {
				if (Red5)
					Red5.onMessage(data.from, data.to, data.msg);
			  });
		  
				//============================
				// LUA Callbacks
				//============================
				Red5Callbacks = 
				{
					IRC_Connect: function(host, chan, nick)
					{
						socket.emit('ircConnect', {"host": host, "chan": chan, "nick": nick});
					},
					
					IRC_Disconnect: function(data)
					{
						socket.emit('ircDisconnect', "");
					},
					
					IRC_Raw: function(data)
					{
						socket.emit('ircRaw', data);
					},
					
					IRC_Say: function(msg)
					{
						socket.emit('say', msg);
					}
				};
				
				if (Red5)
					Red5.PageLoaded();
		</script>
	</body>
</html>